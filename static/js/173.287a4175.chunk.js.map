{"version":3,"file":"static/js/173.287a4175.chunk.js","mappings":"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","sources":["webpack://myreact/./src/components/head/index.module.scss?d267","components/head/index.js","components/learnWrapper/index.js","hooks/useThrottle/index.js","demo/shoppingCart/shoppingCareReducer.js","webpack://myreact/./src/demo/shoppingCart/index.module.scss?aead","demo/shoppingCart/shoppingCart.js","demo/shoppingCart/fakeReducer.js","demo/shoppingCart/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"head\":\"head_head__yl3Oi\"};","import style from \"./index.module.scss\";\r\n\r\nfunction Head(props) {\r\n  const { title, back } = props;\r\n\r\n  return (\r\n    <div className={style.head}>\r\n      <i\r\n        className=\"iconfont icon-jiantou-copy\"\r\n        onClick={() => {\r\n          back();\r\n        }}\r\n      ></i>\r\n      <h1>{title}</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Head;\r\n","import { Children } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport Head from \"../../components/head\";\r\n\r\nfunction App({ children }) {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const title = location.state?.title;\r\n\r\n  return (\r\n    <>\r\n      <Head\r\n        title={title}\r\n        back={() => {\r\n          navigate(-1);\r\n        }}\r\n      />\r\n      {children}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { useRef } from \"react\";\r\n\r\nconst useThrottle = (fn, delay = 300) => {\r\n  const time = useRef();\r\n\r\n  return (...args) => {\r\n    if (time.current) {\r\n      return;\r\n    }\r\n    time.current = setTimeout(() => {\r\n      fn(...args);\r\n      time.current = null;\r\n    }, delay);\r\n  };\r\n};\r\n\r\nexport default useThrottle;\r\n","export const ShoppingCartReducer = (state, action) => {\r\n  const newdata = JSON.parse(JSON.stringify(state));\r\n\r\n  const id = action.payload;\r\n\r\n  const index = state.products.findIndex((item) => {\r\n    return item.id === id;\r\n  });\r\n\r\n  switch (action.type) {\r\n    case \"ADD\":\r\n      newdata.products[index].num++;\r\n      break;\r\n    case \"DECREASE\":\r\n      if (state.products[index].num <= 1) {\r\n        newdata.products.splice(index, 1);\r\n      } else {\r\n        newdata.products[index].num--;\r\n      }\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n\r\n  newdata.total = newdata.products.reduce((total, product) => {\r\n    return total + product.num * product.price;\r\n  }, 0);\r\n\r\n  return newdata;\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"shoppingCartDot\":\"shoppingCart_shoppingCartDot__0yabr\",\"shoppingCart\":\"shoppingCart_shoppingCart__eypyz\",\"img\":\"shoppingCart_img__PB3a0\",\"priceNumber\":\"shoppingCart_priceNumber__7YBUg\",\"flexButton\":\"shoppingCart_flexButton__JYOEp\",\"productsNumber\":\"shoppingCart_productsNumber__VO98H\"};","import { useRef, useEffect } from \"react\";\r\nimport useThrottle from \"../../hooks/useThrottle\";\r\nimport { FakeReducer } from \"./fakeReducer\";\r\nimport { ShoppingCartReducer } from \"./shoppingCareReducer\";\r\nimport style from \"./index.module.scss\";\r\n\r\nconst initState = {\r\n  products: [\r\n    {\r\n      id: 1,\r\n      name: \"福建绾溪柚子\",\r\n      num: 1,\r\n      price: 15,\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"四川高山李子\",\r\n      num: 1,\r\n      price: 5,\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"巨峰葡萄\",\r\n      num: 1,\r\n      price: 6,\r\n    },\r\n    {\r\n      id: 4,\r\n      name: \"海南香蕉\",\r\n      num: 1,\r\n      price: 4,\r\n    },\r\n  ],\r\n  total: 30,\r\n};\r\nlet canRun = true;\r\nfunction ShoppingCart() {\r\n  const pricerRef = useRef();\r\n  const [state, dispatch] = FakeReducer(ShoppingCartReducer, initState);\r\n  const runHandleClick = useThrottle(handleClick, 310);\r\n\r\n  function handleClick(element, id) {\r\n    dispatch({ type: \"ADD\", payload: id });\r\n    createDot(element);\r\n  }\r\n\r\n  function createDot(target) {\r\n    const div = document.createElement(\"div\");\r\n    div.className = style.shoppingCartDot;\r\n\r\n    const { left, top } = target.getBoundingClientRect();\r\n    const width = target.offsetWidth / 2;\r\n\r\n    div.style.left = left + width + \"px\";\r\n    div.style.top = top + width + \"px\";\r\n\r\n    document.body.appendChild(div);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const element = document.querySelectorAll(\".\" + style.shoppingCartDot);\r\n    const current = pricerRef.current;\r\n    const elementOnly = element[element.length - 1];\r\n    if (element.length) {\r\n      const { left, top } = current.getBoundingClientRect();\r\n      const width = current.offsetHeight / 2;\r\n\r\n      element.forEach((item) => {\r\n        item.style.left = left + width + \"px\";\r\n        item.style.top = top + width + \"px\";\r\n      });\r\n\r\n      function removeNode() {\r\n        element.forEach((item) => {\r\n          item.remove();\r\n        });\r\n      }\r\n\r\n      elementOnly.addEventListener(\"transitionend\", removeNode);\r\n      return () => {\r\n        elementOnly.removeEventListener(\"transitionend\", removeNode);\r\n      };\r\n    }\r\n  }, [state]);\r\n\r\n  return (\r\n    <>\r\n      <ul>\r\n        {state.products &&\r\n          state.products.map((item, index) => {\r\n            return (\r\n              <li key={item.id}>\r\n                <div className={style.img}></div>\r\n                <h5>{item.name} </h5>\r\n                <div className={style.priceNumber}>\r\n                  <span>\r\n                    价格 <small>{item.price}</small>\r\n                  </span>\r\n                  <span>数量 {item.num} </span>\r\n                </div>\r\n                <div className={style.flexButton}>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      runHandleClick(e.target, item.id);\r\n                    }}\r\n                  >\r\n                    +\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      dispatch({ type: \"DECREASE\", payload: item.id });\r\n                    }}\r\n                  >\r\n                    -\r\n                  </button>\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n      </ul>\r\n      <div className={style.productsNumber}>\r\n        <p>合计金额：</p>\r\n        <p ref={pricerRef}>{state.total}</p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ShoppingCart;\r\n","import { useState } from \"react\";\r\n\r\nexport const FakeReducer = (reducer, initialState = {}) => {\r\n  const [state, setState] = useState(initialState);\r\n  const dispatch = (action) => {\r\n    setState(reducer(state, action));\r\n  };\r\n  return [state, dispatch];\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport LearnWrapper from \"../../components/learnWrapper\";\r\nimport ShoppingCart from \"./shoppingCart\";\r\nimport style from \"./index.module.scss\";\r\n\r\nfunction Index() {\r\n  return (\r\n    <LearnWrapper>\r\n      <section className={`${style.shoppingCart} page`}>\r\n        <ShoppingCart />\r\n      </section>\r\n    </LearnWrapper>\r\n  );\r\n}\r\n\r\nexport default Index;\r\n"],"names":["props","title","back","className","style","onClick","children","navigate","useNavigate","useLocation","state","fn","delay","time","useRef","args","current","setTimeout","ShoppingCartReducer","action","newdata","JSON","parse","stringify","id","payload","index","products","findIndex","item","type","num","splice","total","reduce","product","price","initState","name","pricerRef","reducer","initialState","useState","setState","FakeReducer","dispatch","runHandleClick","useThrottle","element","target","div","document","createElement","getBoundingClientRect","left","top","width","offsetWidth","body","appendChild","createDot","useEffect","querySelectorAll","elementOnly","length","removeNode","forEach","remove","offsetHeight","addEventListener","removeEventListener","map","e","ref"],"sourceRoot":""}