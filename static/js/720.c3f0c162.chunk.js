"use strict";(self.webpackChunkmyreact=self.webpackChunkmyreact||[]).push([[720],{9780:function(e,n,t){t.d(n,{Z:function(){return a}});var c="head_head__yl3Oi",i=t(184);var a=function(e){var n=e.title,t=e.back;return(0,i.jsxs)("div",{className:c,children:[(0,i.jsx)("i",{className:"iconfont icon-jiantou-copy",onClick:function(){t()}}),(0,i.jsx)("h1",{children:n})]})}},25:function(e,n,t){t(2791);var c=t(6871),i=t(9780),a=t(184);n.Z=function(e){var n,t=e.children,r=(0,c.s0)(),o=null===(n=(0,c.TH)().state)||void 0===n?void 0:n.title;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{title:o,back:function(){r(-1)}}),t]})}},4077:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var c=t(2982),i=t(885),a=t(2791),r=t(25),o=t(184);var d=function(e){var n=e.value,t=e.callback,c=(0,a.useRef)(null);return(0,a.useEffect)((function(){c.current&&c.current.focus()}),[]),(0,o.jsx)("input",{defaultValue:n,onBlur:function(e){t(e.target.value)},ref:c})},l=t(5671),u=t(3144),f=function(){function e(){(0,l.Z)(this,e)}return(0,u.Z)(e,[{key:"onAdd",value:function(n,t,c){e.addNode(n,t),c(t)}},{key:"onDelete",value:function(n,t,c){e.deleteNode(n,t),c(t)}},{key:"onEdit",value:function(n,t,c){e.editNode(n,t),c(t)}},{key:"onSave",value:function(n,t,c,i){e.saveNode(n,t,c),i(t)}},{key:"onInsert",value:function(n,t,c){e.insertNode(n,t),c(t)}}],[{key:"addNode",value:function(n,t){t.forEach((function(t){if(t.key===n)return t.children||(t.children=[]),void t.children.push({value:"\u81ea\u5b9a\u4e49\u6807\u9898",key:n+"-"+t.children.length,parentId:t.code,code:(new Date).getTime()});t.children&&e.addNode(n,t.children)}))}},{key:"deleteNode",value:function(n,t){t.forEach((function(c,i){c.key!==n?c.children&&e.deleteNode(n,c.children):t.splice(i,1)}))}},{key:"editNode",value:function(n,t){t.forEach((function(t){t.key===n?t.isEditable=!0:t.isEditable=!1,t.children&&e.editNode(n,t.children)}))}},{key:"saveNode",value:function(n,t,c){t.forEach((function(t){t.key===n&&(t.value=c,t.isEditable=!1),t.children&&e.saveNode(n,t.children,c)}))}},{key:"findParent",value:function(n,t){for(var c in t){if(t[c].key===n)return[t[c]];if(t[c].children){var i=e.findParent(n,t[c].children);if(i)return i.concat(t[c])}}}},{key:"insertNode",value:function(n,t){var c=e.findParent(n,t),i=c[1];if(i){var a=i.children.findIndex((function(e,n){return e.key===c[0].key}));i.children.splice(a+1,0,{value:"\u81ea\u5b9a\u4e49\u6807\u9898",parentId:i.children.code,code:(new Date).getTime()}),i.children.forEach((function(e,n){e.key=i.key+"-"+n}))}else{var r=t.findIndex((function(e,n){return e.key===c[0].key}));t.splice(r+1,0,{value:"\u81ea\u5b9a\u4e49\u6807\u9898",parentId:0,code:(new Date).getTime()}),t.forEach((function(e,n){e.key="0-"+n}))}}}]),e}(),s=new f,v=[{title:"\u6210\u90fd\u5e02",value:"\u6210\u90fd\u5e02",key:"0-0",code:51001,parentId:0,children:[{key:"0-0-0",title:"\u53cc\u6d41\u533a",value:"\u53cc\u6d41\u533a",parentId:51001,code:510011},{key:"0-0-1",title:"\u6b66\u4faf\u533a",value:"\u6b66\u4faf\u533a",parentId:51001,code:510012},{key:"0-0-2",title:"\u9526\u6c5f\u533a",value:"\u9526\u6c5f\u533a",parentId:51001,code:510013},{key:"0-0-3",title:"\u9752\u7f8a\u533a",value:"\u9752\u7f8a\u533a",parentId:51001,code:510014}]},{key:"0-1",title:"\u7709\u5c71\u5e02",value:"\u7709\u5c71\u5e02",parentId:0,code:52001,children:[{key:"0-1-0",title:"\u4e1c\u5761\u533a",value:"\u4e1c\u5761\u533a",parentId:52001,code:520011,children:[{key:"0-1-0-0",title:"\u542f\u660e\u661f\u82b1\u56ed",value:"\u542f\u660e\u661f\u82b1\u56ed",parentId:520011,code:5200111},{key:"0-1-0-1",title:"\u4e91\u6eaa\u4e0a",value:"\u4e91\u6eaa\u4e0a",parentId:520011,code:5200112},{key:"0-1-0-2",title:"\u7709\u5c71\u5e02\u653f\u5e9c",value:"\u7709\u5c71\u5e02\u653f\u5e9c",parentId:520011,code:5200113},{key:"0-1-0-3",title:"\u4e07\u8fbe\u5e7f\u573a",value:"\u4e07\u8fbe\u5e7f\u573a",parentId:520011,code:5200114}]},{key:"0-1-1",title:"\u4ec1\u5bff\u53bf",value:"\u4ec1\u5bff\u53bf",parentId:52001,code:520012},{key:"0-1-2",title:"\u4e39\u68f1\u53bf",value:"\u4e39\u68f1\u53bf",parentId:52001,code:520013},{key:"0-1-3",title:"\u9752\u795e\u53bf",value:"\u9752\u795e\u53bf",parentId:52001,code:520014}]}],h=t(2097),k=(t(8678),"tree_tree__1Wo3R"),y="tree_treeWrapper__woV1l",p="tree_item__T6iX2",N="tree_menu__K6P6I",I="tree_title__5yUPs",x=h.Z.TreeNode;var E=function(){var e=(0,a.useState)([]),n=(0,i.Z)(e,2),t=n[0],l=n[1],u=(0,a.useState)([]),f=(0,i.Z)(u,2),E=f[0],j=f[1],m=(0,a.useState)(!1),Z=(0,i.Z)(m,2),_=Z[0],g=Z[1],b=(0,a.useState)({add:[],remove:[],edit:[]}),S=(0,i.Z)(b,2),w=S[0],C=S[1];function T(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){n.push(e),e.children&&T(e.children,n)})),n}return(0,a.useEffect)((function(){var e=JSON.parse(JSON.stringify(v)),n=JSON.parse(JSON.stringify(v));l(e),j(n)}),[]),(0,a.useEffect)((function(){console.log(w)}),[w]),(0,o.jsx)(r.Z,{children:(0,o.jsxs)("section",{className:"".concat(k," page"),children:[t.length&&(0,o.jsx)(h.Z,{className:y,style:{height:"80vh",overflow:"auto"},defaultExpandedKeys:["0-1-0"],children:function e(n){return n.map((function(n){return n.title=(0,o.jsx)("section",{className:p,children:n.isEditable?(0,o.jsx)("div",{className:I,children:(0,o.jsx)(d,{value:n.value,callback:function(e){s.onSave(n.key,t,e,(function(e){l((0,c.Z)(e))}))}})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:I,children:n.value}),(0,o.jsxs)("div",{className:N,children:[(0,o.jsx)("div",{onClick:function(){s.onEdit(n.key,t,(function(e){l((0,c.Z)(e))})),_||g(!0)},children:"\u4fee"}),(0,o.jsx)("div",{onClick:function(){s.onAdd(n.key,t,(function(e){l((0,c.Z)(e))})),_||g(!0)},children:"\u589e"}),(0,o.jsx)("div",{onClick:function(){s.onDelete(n.key,t,(function(e){l((0,c.Z)(e))})),_||g(!0)},children:"\u5220"}),(0,o.jsx)("div",{onClick:function(){s.onInsert(n.key,t,(function(e){l((0,c.Z)(e))})),_||g(!0)},children:"\u63d2"})]})]})}),n.children?(0,o.jsx)(x,{title:n.title,dataRef:n,children:e(n.children)},n.key):(0,o.jsx)(x,{title:n.title},n.key)}))}(t)}),_&&(0,o.jsx)("button",{onClick:function(){!function(){var e=T(t),n=T(t),i=T(E),a=[],r=[];e.forEach((function(e){var n=!1;if(i.forEach((function(t){e.code===t.code&&(n=!0)})),!n){var t={value:e.value,code:e.code,key:e.key,parentId:e.parentId};a.push(t)}})),e.forEach((function(e){var n=!1;if(i.forEach((function(t){e.code===t.code&&e.value!==t.value&&(n=!0)})),n){var t={value:e.value,code:e.code,key:e.key,parentId:e.parentId};r.push(t)}})),a.forEach((function(e){n.forEach((function(t,c){e.code===t.code&&n.splice(c,1)}))})),n.forEach((function(e){i.forEach((function(n,t){e.code===n.code&&i.splice(t,1)}))})),C({add:[].concat(a),edit:[].concat(r),remove:(0,c.Z)(i)}),alert("\u65b0\u589e\u4e86".concat(a.length,"\u9879 \n \u5220\u9664\u4e86").concat(i.length,"\u9879 \n \u4fee\u6539\u4e86").concat(r.length,"\u9879 \n"))}()},children:"\u4fdd\u5b58\u5217\u8868"})]})})}}}]);
//# sourceMappingURL=720.c3f0c162.chunk.js.map