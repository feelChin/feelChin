{"version":3,"file":"static/js/739.c221a0f5.chunk.js","mappings":"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","sources":["webpack://myreact/./src/components/homeGame/index.module.scss?33ab","components/homeGame/index.js","webpack://myreact/./src/pages/home/index.module.scss?015e","pages/home/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"homeGame\":\"homeGame_homeGame__vRsNA\",\"history\":\"homeGame_history__GVIUq\",\"historyItem\":\"homeGame_historyItem__kMtBJ\",\"historyMenu\":\"homeGame_historyMenu__UmZvF\",\"winner\":\"homeGame_winner__n1LM3\",\"winnerText\":\"homeGame_winnerText__eqUA8\",\"userInfo\":\"homeGame_userInfo__6ONX+\",\"userAvatar\":\"homeGame_userAvatar__x+Sqy\",\"userName\":\"homeGame_userName__5WyFt\",\"winnerList\":\"homeGame_winnerList__2afZR\",\"user\":\"homeGame_user__NWVoT\",\"userItem\":\"homeGame_userItem__g2IqZ\",\"homeGameWrapper\":\"homeGame_homeGameWrapper__7XbCQ\",\"homeGameBox\":\"homeGame_homeGameBox__6pyja\",\"square\":\"homeGame_square__yZxGW\",\"delete\":\"homeGame_delete__wIZ0Y\",\"round\":\"homeGame_round__bXxXD\",\"showWinner\":\"homeGame_showWinner__l4oAy\"};","import { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport style from \"./index.module.scss\";\r\n\r\nconst initArray = new Array(9).fill(\"\");\r\nconst user = [\r\n  {\r\n    name: \"张三\",\r\n    avatar: require(\"../../images/1.jpg\"),\r\n  },\r\n  {\r\n    name: \"李四\",\r\n    avatar: require(\"../../images/2.jpg\"),\r\n  },\r\n];\r\n\r\nfunction HomeGame() {\r\n  const [reset, setReset] = useState(null); // 重置 还是 复盘类型\r\n  const [squares, setSquares] = useState(initArray); // 棋盘数组\r\n  const [xIsNext, setXIsNext] = useState(true); // 切换 玩家\r\n  const [winner, setWinner] = useState(null); // 胜利者\r\n  const [showWinner, setShowWinner] = useState(null); // 绘制胜利高亮\r\n  const [history, setHistory] = useState([]); // 复盘数据\r\n  const [timeCtrl, setTimeCtrl] = useState(null); // 时间控制器\r\n\r\n  function setHistoryFC(index) {\r\n    const { xIsNext, squares } = history[index];\r\n\r\n    const arr = [...history];\r\n    arr.forEach((item) => {\r\n      item.checked = false;\r\n    });\r\n    arr[index].checked = true;\r\n    setHistory(arr);\r\n\r\n    setXIsNext(xIsNext);\r\n    setSquares([...squares]);\r\n    setWinner(null);\r\n    setShowWinner(null);\r\n  }\r\n\r\n  function handleClick(i) {\r\n    if (squares[i]) return;\r\n    if (reset === \"history\") return;\r\n\r\n    const arr = [...squares];\r\n    arr[i] = xIsNext ? \"X\" : \"O\";\r\n    setSquares(arr);\r\n    setXIsNext(!xIsNext);\r\n\r\n    setHistory([\r\n      ...history,\r\n      {\r\n        xIsNext,\r\n        squares: arr,\r\n        checked: false,\r\n      },\r\n    ]);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reset === \"history\") return;\r\n\r\n    const result = calculateWinner(squares);\r\n    if (result) {\r\n      const { winner, line } = result;\r\n\r\n      const showWinner = [...initArray];\r\n      line.forEach((item, index) => {\r\n        showWinner[item] = String(item);\r\n      });\r\n      setShowWinner(showWinner);\r\n      setTimeout(() => {\r\n        setWinner(winner);\r\n        setReset(null);\r\n      }, 1000);\r\n    } else {\r\n      let num = 0;\r\n      squares.forEach((item, index) => {\r\n        if (item) {\r\n          num++;\r\n        }\r\n      });\r\n      if (num === 9) {\r\n        setWinner(\"平局\");\r\n        setReset(null);\r\n      }\r\n    }\r\n  }, [squares]);\r\n\r\n  useEffect(() => {\r\n    if (reset === \"reset\") {\r\n      setSquares([...initArray]);\r\n      setXIsNext(true);\r\n      setWinner(null);\r\n      setShowWinner(null);\r\n      setHistory([]);\r\n    }\r\n  }, [reset]);\r\n\r\n  useEffect(() => {\r\n    if (timeCtrl === null) return;\r\n\r\n    const len = history.length;\r\n    if (timeCtrl === len) {\r\n      const result = calculateWinner(squares);\r\n      if (result) {\r\n        const { winner, line } = result;\r\n\r\n        const showWinner = [...initArray];\r\n        line.forEach((item, index) => {\r\n          showWinner[item] = String(item);\r\n        });\r\n        setShowWinner(showWinner);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const timer = setTimeout(() => {\r\n      setHistoryFC(timeCtrl);\r\n      setTimeCtrl((timeCtrl) => timeCtrl + 1);\r\n    }, 1000);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [timeCtrl]);\r\n\r\n  function renderSquare() {\r\n    return initArray.map((item, index) => (\r\n      <div className={style.square} key={index}>\r\n        <button\r\n          className={showWinner && showWinner[index] ? style.showWinner : \"\"}\r\n          onClick={() => {\r\n            handleClick(index);\r\n          }}\r\n        >\r\n          {squares[index] === \"X\" && (\r\n            <section className={style.delete}></section>\r\n          )}\r\n          {squares[index] === \"O\" && (\r\n            <section className={style.round}></section>\r\n          )}\r\n        </button>\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  function renderUser() {\r\n    return user.map((item, index) => (\r\n      <div className={style.userItem} key={index}>\r\n        <div className={style.userAvatar}>\r\n          <img src={item.avatar} alt=\"\" />\r\n        </div>\r\n        <div className={style.userName}>{item.name}</div>\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  // 获胜判断  原理是通过胜利条件检查每一行，每一列，每一个斜线，如果有一个符合条件，则返回true\r\n  function calculateWinner(squares) {\r\n    const lines = [\r\n      [0, 1, 2],\r\n      [3, 4, 5],\r\n      [6, 7, 8],\r\n      [0, 3, 6],\r\n      [1, 4, 7],\r\n      [2, 5, 8],\r\n      [0, 4, 8],\r\n      [2, 4, 6],\r\n    ];\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const [a, b, c] = lines[i];\r\n      if (\r\n        squares[a] &&\r\n        squares[a] === squares[b] &&\r\n        squares[a] === squares[c]\r\n      ) {\r\n        return {\r\n          winner: squares[a],\r\n          line: lines[i],\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function handleClickReset(flag) {\r\n    setWinner(\"\");\r\n    setReset(flag);\r\n  }\r\n\r\n  return (\r\n    <section className={style.homeGame}>\r\n      <div className={style.user}>\r\n        {renderUser()}\r\n        <h5>\r\n          <b>V</b>\r\n          <small>s</small>\r\n        </h5>\r\n      </div>\r\n      <div className={style.homeGameWrapper}>\r\n        <div className={style.homeGameBox}>{renderSquare()}</div>\r\n      </div>\r\n      {winner && <Winner winner={winner} handleClickReset={handleClickReset} />}\r\n      {reset === \"history\" && (\r\n        <History\r\n          history={history}\r\n          handleClickReset={handleClickReset}\r\n          setHistoryFC={setHistoryFC}\r\n          setTimeCtrl={setTimeCtrl}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction Winner(props) {\r\n  const { winner, handleClickReset } = props;\r\n\r\n  function renderText(avatar, name) {\r\n    return (\r\n      <>\r\n        <div className={style.userInfo}>\r\n          <div className={style.userAvatar}>\r\n            <img src={avatar} alt=\"\" />\r\n          </div>\r\n          <div className={style.userName}>{name}</div>\r\n        </div>\r\n        <footer>胜利了...</footer>\r\n      </>\r\n    );\r\n  }\r\n\r\n  function renderFC() {\r\n    if (winner === \"X\") {\r\n      return renderText(user[0].avatar, user[0].name);\r\n    } else if (winner === \"O\") {\r\n      return renderText(user[1].avatar, user[1].name);\r\n    } else {\r\n      return <footer>平局!</footer>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={style.winner}>\r\n      <div className={style.winnerText}>\r\n        <header>棋盘结果</header>\r\n        {renderFC()}\r\n        <div className={style.winnerList}>\r\n          <button\r\n            onClick={() => {\r\n              handleClickReset(\"reset\");\r\n            }}\r\n          >\r\n            继续挑战\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              handleClickReset(\"history\");\r\n            }}\r\n          >\r\n            复盘\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction History(props) {\r\n  const { history, setHistoryFC, handleClickReset, setTimeCtrl } = props;\r\n\r\n  function renderList() {\r\n    return history.map((item, index) => (\r\n      <div\r\n        className={`${style.historyItem} ${item.checked ? \"active\" : \"\"}`}\r\n        key={index}\r\n        onClick={() => {\r\n          setHistoryFC(index);\r\n        }}\r\n      >\r\n        第{index + 1}步：{item[\"xIsNext\"] ? user[0].name : user[1].name}落子\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  return (\r\n    <section className={style.history}>\r\n      {renderList()}\r\n      <div className={style.historyMenu}>\r\n        <button\r\n          onClick={() => {\r\n            setTimeCtrl(0);\r\n          }}\r\n        >\r\n          自动播放\r\n        </button>\r\n        <button\r\n          onClick={() => {\r\n            handleClickReset(\"reset\");\r\n            setTimeCtrl(null);\r\n          }}\r\n        >\r\n          继续挑战\r\n        </button>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default HomeGame;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"home\":\"home_home__sx9be\"};","import React from \"react\"\r\nimport HomeGame from '../../components/homeGame';\r\nimport style from './index.module.scss';\r\n\r\nfunction Home() {\r\n    return (\r\n        <section className={`${style.home} page`}>\r\n            <HomeGame />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Home"],"names":["initArray","Array","fill","user","name","avatar","require","Winner","props","winner","handleClickReset","renderText","className","style","src","alt","onClick","History","history","setHistoryFC","setTimeCtrl","map","item","index","checked","useState","reset","setReset","squares","setSquares","xIsNext","setXIsNext","setWinner","showWinner","setShowWinner","setHistory","timeCtrl","arr","forEach","calculateWinner","lines","i","length","a","b","c","line","flag","useEffect","result","String","setTimeout","num","len","timer","clearTimeout","handleClick"],"sourceRoot":""}